"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[9359],{37170:(e,a,t)=>{t.d(a,{Z:()=>l});var r=t(87363),s=t.n(r),i=t(86976);const n=(0,i.Z)({resolved:{},chunkName:()=>"PlaySimilarGames.component.async",isReady(e){const a=this.resolve(e);return!0===this.resolved[a]&&!!t.m[a]},importAsync:()=>Promise.all([t.e(6122),t.e(6855)]).then(t.bind(t,51920)),requireAsync(e){const a=this.resolve(e);return this.resolved[a]=!1,this.importAsync(e).then((e=>(this.resolved[a]=!0,e)))},requireSync(e){const a=this.resolve(e);return t(a)},resolve(){return 51920}},{}),l=n},48673:(e,a,t)=>{t.r(a),t.d(a,{default:()=>D});var r=t(87363),s=t.n(r),i=t(29994),n=t(77123),l=t(45331),o=t(78740),c=t(4230),m=t(4463),u=t(40184),p=t(15771);var d=t(37170),g=t(3865),f=t(53604),y=t(85467),h=t(33119),v=t(5825),b=t(43548),_=t(28705);var E=t(17061),O=t(47484),A=Object.defineProperty,P=Object.defineProperties,G=Object.getOwnPropertyDescriptors,w=Object.getOwnPropertySymbols,S=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable,I=(e,a,t)=>a in e?A(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t;const D=(0,i.$j)((function(e){return{isDev:e.isDev,isFullscreenActive:e.ui.isFullscreenActive}}),(function(e){return(0,n.DE)({loadSimilarGames:h.w1},e)}))((({appId:e,isFullscreenActive:a,isDev:t,loadSimilarGames:i,inGamePage:n=!1,isBlackFadeout:h})=>{var A;const{isGamesApp:D,isWorldWide:k,lang:j,pfid:M,platform:C,playPageData:F,isSearchCrawler:x=!1,similarGames:L,abt:{flags:Z}}=(0,r.useContext)(l.Z),[B,V]=(0,r.useState)(!1),[T,q]=(0,r.useState)(!1),[H,U]=(0,r.useState)(!1),J=(0,y.T)(),K=(0,f.f)(),R=(0,v.C)((e=>e.similarGames||{})),W=(0,v.C)((e=>e.similarGamesLoading)),X=(0,r.useMemo)((()=>x||n),[x,n]),$=e||(null==(A=F.gameInfo)?void 0:A.appId),Q=((e,a,t)=>{const s=(0,m.TH)(),[i]=(0,r.useState)((()=>({queryParams:s.search.slice(1),hash:s.hash}))),{isDistGame:n,abt:{flags:l}}=(0,u.b)(),o=(0,p.tQ)(l),d=(0,p.Fe)(l);return(0,r.useMemo)((()=>(0,c._Z)({appId:a,hasMounted:t,inGamePage:e,isDistGame:n,locationHash:i.hash,locationSearch:i.queryParams,showExceptNavigationFromPlayedGames:o,showOnRedirectFromCatalog:d})),[a,t,e,n,i,o,d])})(x||n,$,K);(0,r.useEffect)((()=>{(null==L?void 0:L.length)&&(R[Number($)]=L)}),[L,$,R]);const z=(0,r.useMemo)((()=>!W&&void 0===R[Number($)]),[R,$,W]),Y=(0,r.useCallback)((()=>{U(!0)}),[]);(0,r.useEffect)((()=>{(0,O.EE)((()=>{V(!0)}),n?3e3:void 0)}),[n]),(0,r.useEffect)((()=>{var e,a;if(B&&Q&&z){let r;t&&(r=(0,E.V)(o.Vs)||"",r=null!=(e=parseInt(r,10))?e:10),i((a=((e,a)=>{for(var t in a||(a={}))S.call(a,t)&&I(e,t,a[t]);if(w)for(var t of w(a))N.call(a,t)&&I(e,t,a[t]);return e})({adjustGamesCount:c.kr.bind(null,r),appId:Number($),int:k,lang:j},(0,p.B0)(Z)?{pageType:"game"}:{}),P(a,G({pfid:M,platform:C,standalone:D}))))}}),[$,Q,Z,t,D,k,j,i,M,C,B,z]);const ee=(0,r.useCallback)(((e,a)=>{const{action:t}=e.data;"on-show"===t?q((0,_.Ab)(Z)):"on-hide"===t&&q(!1)}),[q,Z]);(0,r.useEffect)((()=>(b.Z.onInternalMessage("sticky-manager",ee),()=>{b.Z.offInternalMessage("sticky-manager",ee)})),[ee]);const ae=(0,r.useMemo)((()=>(!K||!B||W)&&!a),[K,a,W,B]);return!Q||n&&!X||T?((0,c.ii)(),null):x&&n&&Q&&!(e=>{if(null==e)return!0;if(Array.isArray(e)||"string"==typeof e)return!e.length;for(let a in e)if(e.hasOwnProperty(a))return!1;return!0})(R)?s().createElement("section",{className:"game-page__similar"},s().createElement("span",{className:"similar__title"},J("similar.title-in-game-page")),s().createElement(d.Z,{inGamePage:n,isBlackFadeout:h,similarToAppId:$})):!x&&n?s().createElement("section",{className:"game-page__similar-in-game-page"},s().createElement("span",{className:"similar__title"},J("similar.title-in-game-page")),s().createElement("div",{className:"similar__container"},!H&&s().createElement(g.I,{inGamePage:n,visible:K}),!ae&&s().createElement(d.Z,{inGamePage:n,isBlackFadeout:h,similarToAppId:$,onShow:Y}))):s().createElement(s().Fragment,null,!H&&s().createElement(g.I,{inGamePage:n,visible:K}),!ae&&s().createElement(d.Z,{inGamePage:n,isBlackFadeout:h,similarToAppId:$,onShow:Y}))}))},78740:(e,a,t)=>{t.d(a,{Ek:()=>n,SA:()=>i,UG:()=>o,VM:()=>u,Vs:()=>c,b3:()=>r,cC:()=>m,gK:()=>s,lX:()=>l});const r="similar_games",s="game_promo_similar_games",i="play-similar-games",n="play-similar-games-stubs",l=107,o=20,c="similar_games_count",m="similar_games_proxy",u="yandexGames_similar_games_close"},4230:(e,a,t)=>{t.d(a,{_Z:()=>A,ii:()=>P,kr:()=>E,xG:()=>_});var r=t(67748),s=t.n(r),i=t(34711),n=t(35090),l=t(48810),o=t(78740),c=Object.defineProperty,m=Object.defineProperties,u=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,f=(e,a,t)=>a in e?c(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t,y=(e,a)=>{for(var t in a||(a={}))d.call(a,t)&&f(e,t,a[t]);if(p)for(var t of p(a))g.call(a,t)&&f(e,t,a[t]);return e},h=(e,a)=>m(e,u(a));const v=e=>{let a;try{a=JSON.parse(e)}catch(e){a=[]}return Array.isArray(a)?a:[]},b=(e,a)=>{const t=Array.isArray(e)?e:v(e);a&&t.push(a),(0,l.Ur)(o.VM,JSON.stringify(t))};function _(e){const a=(0,l.dq)(o.VM);a.wasError||!a.value?(0,l.Ur)(o.VM,JSON.stringify([e])):b(a.value,e)}function E(e,a){return void 0===e||0===a.length?a:a.length>e?a=a.slice(0,e):(a.length<e&&(a=[...Array(Math.ceil(e/a.length))].reduce(((e,t,r)=>e.concat(a.map(((e,t)=>h(y({},e),{appID:e.appID+r,title:e.title+` (${r*a.length+t+1})`}))))),[]).slice(0,e)),a)}const O=["played","user_profile_recent_games"];function A({appId:e,hasMounted:a,inGamePage:t,isDistGame:r,locationHash:c,locationSearch:m,showExceptNavigationFromPlayedGames:u,showOnRedirectFromCatalog:p}){if(r)return!1;const d=s().parse(m.slice(1));if("distrib"===d.utm_source||d.clid)return!1;if(t)return!0;if(!a)return!0;if((0,i.X)())return!1;if(u){const e=s().parse(c);if(e.pos&&"string"==typeof e.pos)try{if(O.includes(JSON.parse(e.pos).listType))return!1}catch(e){}}else if(!p&&(0,n.Oo)())return!1;const g=(0,l.dq)(o.VM);if(!g.wasError&&g.value){if(v(g.value).includes(e))return!1}return!0}function P(){"undefined"!=typeof document&&document.body.classList.contains("with-similar-games")&&document.body.classList.remove("with-similar-games")}},3865:(e,a,t)=>{t.d(a,{I:()=>u,Z:()=>p});var r=t(63904),s=t.n(r),i=t(87363),n=t.n(i),l=t(78740);const o=s().with("play-similar-games-stub");class c extends i.Component{render(){return n().createElement("div",{className:o()},n().createElement("div",{className:o("block",{text:Boolean(this.props.text),bg:!this.props.text})},this.props.text),n().createElement("div",{className:o("title",{bg:this.props.titleLine})}))}}const m=s().with(l.Ek),u=({inGamePage:e=!1,visible:a=!0})=>n().createElement("div",{className:m({visible:a,"in-game-page":e})},Array.from(Array(e?6:8)).map(((e,a)=>n().createElement(c,{key:a,titleLine:!0}))),n().createElement(c,null)),p=c}}]);
//# sourceMappingURL=https://s3.mdst.yandex.net/games/source-maps/_/build/client/game/desktop/yandex/PlaySimilarGamesManager.component.async.c22fdea03465eb23fcb7.js.map